/*
 ============================================================================
 Name        : Multiplication.c
 Author      : Sin Shimozono
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define VALUE(c) ((char) (c) - '0')
#define DIGIT(v) ('0' + (char) (v))

static char tt[10][10][3] = {
		{ " 0", " 0", " 0", " 0", " 0", " 0", " 0", " 0", " 0", " 0", },
		{ " 0", " 1", " 2", " 3", " 4", " 5", " 6", " 7", " 8", " 9", },
		{ " 0", " 2", " 4", " 6", " 8", "10", "12", "14", "16", "18", },
		{ " 0", " 3", " 6", " 9", "12", "15", "18", "21", "24", "27", },
		{ " 0", " 4", " 8", "12", "16", "20", "24", "28", "32", "36", },
		{ " 0", " 5", "10", "15", "20", "25", "30", "35", "40", "45", },
		{ " 0", " 6", "12", "18", "24", "30", "36", "42", "48", "54", },
		{ " 0", " 7", "14", "21", "28", "35", "42", "49", "56", "63", },
		{ " 0", " 8", "16", "24", "32", "40", "48", "56", "64", "72", },
		{ " 0", " 9", "18", "27", "36", "45", "54", "63", "72", "81", },
};
static char pt[11][10][3] = {
		{ " 0", " 1", " 2", " 3", " 4", " 5", " 6", " 7", " 8", " 9", },
		{ " 1", " 2", " 3", " 4", " 5", " 6", " 7", " 8", " 9", "10", },
		{ " 2", " 3", " 4", " 5", " 6", " 7", " 8", " 9", "10", "11", },
		{ " 3", " 4", " 5", " 6", " 7", " 8", " 9", "10", "11", "12", },
		{ " 4", " 5", " 6", " 7", " 8", " 9", "10", "11", "12", "13", },
		{ " 5", " 6", " 7", " 8", " 9", "10", "11", "12", "13", "14", },
		{ " 6", " 7", " 8", " 9", "10", "11", "12", "13", "14", "15", },
		{ " 7", " 8", " 9", "10", "11", "12", "13", "14", "15", "16", },
		{ " 8", " 9", "10", "11", "12", "13", "14", "15", "16", "17", },
		{ " 9", "10", "11", "12", "13", "14", "15", "16", "17", "18", },
};

void add(char * x, char * y, char * z) {
	char * t;
	char carry = ' ', cx, cy;
	for(; *x || *y || carry != ' ' ; ) {
		cx = (*x ? *x : '0');
		cy = (*y ? *y : '0');
		t = pt[VALUE(cx)][VALUE(cy)];
		if ( carry == '1' ) {
			*z = pt[VALUE(t[1])][VALUE(carry)][1];
		} else {
			*z = t[1];
		}
		carry = t[0];
		if ( *x ) ++x;
		if ( *y ) ++y;
		++z;
	}
	*z = '\0';
}

int rputs(char * ptr) {
	char * h = ptr;
	int cnt = 0;
	for(; *ptr ; ++ptr);
	if ( ptr != h ) {
		do {
			--ptr;
			putchar(*ptr);
			++cnt;
		} while ( ptr != h );
	}
	return cnt;
}

int main(int argc, char * argv[]) {
	char * x = argv[1], *y = argv[2];
	printf("x = ");
	rputs(x);
	printf(", y = ");
	rputs(y);
	printf("\n");

	char ans[8];
	add(x,y,ans);
	printf("answer = ");
	rputs(ans);
	printf("\n");
	add(x,ans,ans);
	printf("answer = ");
	rputs(ans);
	printf("\n");

	return EXIT_SUCCESS;
}
